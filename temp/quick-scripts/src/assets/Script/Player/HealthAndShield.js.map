{"version":3,"sources":["assets\\Script\\Player\\HealthAndShield.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,4EAA4E;AAC5E,mBAAmB;AACnB,sFAAsF;AACtF,8BAA8B;AAC9B,sFAAsF;;;;;;;;;;;;;;;;;;;;;AAEhF,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAA6C,mCAAY;IAAzD;QAAA,qEAmEC;QAhEC,WAAK,GAAY,IAAI,CAAC;QAEtB,eAAS,GAAY,IAAI,CAAC;QAE1B,aAAO,GAAY,IAAI,CAAC;QAExB,iBAAW,GAAY,IAAI,CAAC;QAE5B,aAAO,GAAa,IAAI,CAAC;QAEzB,wBAAwB;QACxB,WAAK,GAAW,CAAC,CAAC;;IAqDpB,CAAC;wBAnEoB,eAAe;IAelC,gCAAM,GAAN;QACE,iBAAe,CAAC,QAAQ,GAAG,IAAI,CAAC;IAClC,CAAC;IAED,+BAAK,GAAL,cAAS,CAAC;IAEV,oCAAU,GAAV,UAAW,OAAe,EAAE,GAAW;QACrC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QACf,IAAI,KAAK,GAAG,OAAO,CAAC;QACpB,KAAK,IAAI,GAAG,CAAC;QACb,IAAI,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAC3D,IAAI,KAAK,GAAG,CAAC;YAAE,KAAK,GAAG,CAAC,CAAC;QACzB,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC;QAC1B,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,KAAK,CAAC;QAC5B,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,QAAQ,CAAC;IACjC,CAAC;IACD,wCAAc,GAAd,UAAe,OAAe,EAAE,GAAW;QACzC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QACf,IAAI,KAAK,GAAG,OAAO,CAAC;QACpB,KAAK,IAAI,GAAG,CAAC;QACb,IAAI,KAAK,GAAG,CAAC;YAAE,KAAK,GAAG,CAAC,CAAC;QACzB,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,KAAK,CAAC;QAC9B,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,KAAK,CAAC;IAClC,CAAC;IACD,wCAAc,GAAd,UACE,SAAiB,EACjB,KAAa,EACb,aAAqB,EACrB,SAAiB;QAEjB,IAAI,OAAO,GAAG,SAAS,CAAC;QACxB,OAAO,IAAI,KAAK,CAAC;QACjB,IAAI,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC/D,IAAI,OAAO,GAAG,CAAC;YAAE,OAAO,GAAG,CAAC,CAAC;QAC7B,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,OAAO,CAAC;QAC5B,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,OAAO,CAAC;QAC9B,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,QAAQ,CAAC;QAC/B,IAAI,WAAW,GAAG,aAAa,CAAC;QAChC,WAAW,IAAI,SAAS,CAAC;QACzB,IAAI,WAAW,GAAG,CAAC;YAAE,WAAW,GAAG,CAAC,CAAC;QACrC,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,WAAW,CAAC;QACpC,IAAI,CAAC,WAAW,CAAC,MAAM,GAAG,WAAW,CAAC;IACxC,CAAC;IAED,gCAAM,GAAN,UAAO,EAAE;QACP,IAAI,CAAC,KAAK,IAAI,EAAE,CAAC;QACjB,IAAI,IAAI,CAAC,KAAK,IAAI,CAAC,EAAE;YACnB,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,GAAG,CAAC,CAAC;SAC/B;aAAM;YACL,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,GAAG,GAAG,CAAC;SACjC;IACH,CAAC;;IA/DD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;kDACI;IAEtB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;sDACQ;IAE1B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;oDACM;IAExB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;wDACU;IAE5B;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;oDACM;IAXN,eAAe;QADnC,OAAO;OACa,eAAe,CAmEnC;IAAD,sBAAC;CAnED,AAmEC,CAnE4C,EAAE,CAAC,SAAS,GAmExD;kBAnEoB,eAAe","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/life-cycle-callbacks.html\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class HealthAndShield extends cc.Component {\n  static instance: HealthAndShield;\n  @property(cc.Node)\n  hpBar: cc.Node = null;\n  @property(cc.Node)\n  shieldBar: cc.Node = null;\n  @property(cc.Node)\n  hpBarUI: cc.Node = null;\n  @property(cc.Node)\n  shieldBarUI: cc.Node = null;\n  @property(cc.Label)\n  HpLabel: cc.Label = null;\n\n  // LIFE-CYCLE CALLBACKS:\n  timer: number = 0;\n  onLoad() {\n    HealthAndShield.instance = this;\n  }\n\n  start() {}\n\n  setStateHP(current: number, max: number) {\n    this.timer = 3;\n    var state = current;\n    state /= max;\n    var hpString = Math.ceil(current) + \" / \" + Math.ceil(max);\n    if (state < 0) state = 0;\n    this.hpBar.scaleX = state;\n    this.hpBarUI.scaleX = state;\n    this.HpLabel.string = hpString;\n  }\n  setStateShield(current: number, max: number) {\n    this.timer = 3;\n    var state = current;\n    state /= max;\n    if (state < 0) state = 0;\n    this.shieldBar.scaleX = state;\n    this.shieldBarUI.scaleX = state;\n  }\n  setStateOnLoad(\n    currentHp: number,\n    maxHp: number,\n    currentShield: number,\n    maxShield: number\n  ) {\n    var stateHp = currentHp;\n    stateHp /= maxHp;\n    var hpString = Math.ceil(currentHp) + \" / \" + Math.ceil(maxHp);\n    if (stateHp < 0) stateHp = 0;\n    this.hpBar.scaleX = stateHp;\n    this.hpBarUI.scaleX = stateHp;\n    this.HpLabel.string = hpString;\n    var StateShield = currentShield;\n    StateShield /= maxShield;\n    if (StateShield < 0) StateShield = 0;\n    this.shieldBar.scaleX = StateShield;\n    this.shieldBarUI.scaleX = StateShield;\n  }\n\n  update(dt) {\n    this.timer -= dt;\n    if (this.timer <= 0) {\n      this.hpBar.parent.opacity = 0;\n    } else {\n      this.hpBar.parent.opacity = 255;\n    }\n  }\n}\n"]}