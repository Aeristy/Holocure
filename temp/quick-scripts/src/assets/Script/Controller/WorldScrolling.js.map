{"version":3,"sources":["assets\\Script\\Controller\\WorldScrolling.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,4EAA4E;AAC5E,mBAAmB;AACnB,sFAAsF;AACtF,8BAA8B;AAC9B,sFAAsF;;;;;;;;;;;;;;;;;;;;;AAEhF,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAA4C,kCAAY;IAAxD;QAAA,qEAuCC;QApCC,YAAM,GAAY,IAAI,CAAC;QAGvB,cAAQ,GAAG,IAAI,CAAC;QAGhB,kBAAY,GAAc,EAAE,CAAC;QAI7B,oBAAc,GAAG,KAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;;IA0BrC,CAAC;uBAvCoB,cAAc;IAejC,+BAAM,GAAN;QACE,gBAAc,CAAC,QAAQ,GAAG,IAAI,CAAC;QAE/B,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;QAClC,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,QAAQ,GAAG,CAAC,CAAC;IAC1C,CAAC;IAED,8BAAK,GAAL,cAAS,CAAC;IAEV,+BAAM,GAAN,UAAO,EAAE;QACP,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACjD,IAAI,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACvD,IAAI,SAAS,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAEvD,IAAI,SAAS,IAAI,IAAI,CAAC,cAAc;gBAClC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,cAAc,CAAC;YAChD,IAAI,SAAS,IAAI,CAAC,IAAI,CAAC,cAAc;gBACnC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,cAAc,CAAC;YAChD,IAAI,SAAS,IAAI,IAAI,CAAC,cAAc;gBAClC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,cAAc,CAAC;YAChD,IAAI,SAAS,IAAI,CAAC,IAAI,CAAC,cAAc;gBACnC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,cAAc,CAAC;SACjD;IACH,CAAC;;IAnCD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;kDACK;IAGvB;QADC,QAAQ,CAAC,EAAE,CAAC,OAAO,CAAC;oDACL;IAGhB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;wDACW;IATV,cAAc;QADlC,OAAO;OACa,cAAc,CAuClC;IAAD,qBAAC;CAvCD,AAuCC,CAvC2C,EAAE,CAAC,SAAS,GAuCvD;kBAvCoB,cAAc","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/life-cycle-callbacks.html\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class WorldScrolling extends cc.Component {\n  static instance: WorldScrolling;\n  @property(cc.Node)\n  player: cc.Node = null;\n\n  @property(cc.Integer)\n  tileSize = 3849;\n\n  @property(cc.Node)\n  terrainTiles: cc.Node[] = [];\n\n  playerTilePos: cc.Vec2;\n  currentplayerTilePos: cc.Vec2;\n  scrollDistance = this.tileSize * 3;\n  changeDistance: number;\n  onLoad() {\n    WorldScrolling.instance = this;\n\n    this.tileSize = this.tileSize / 2;\n    this.changeDistance = this.tileSize * 3;\n  }\n\n  start() {}\n\n  update(dt) {\n    for (let i = 0; i < this.terrainTiles.length; i++) {\n      var distanceX = this.player.x - this.terrainTiles[i].x;\n      var distanceY = this.player.y - this.terrainTiles[i].y;\n\n      if (distanceX >= this.changeDistance)\n        this.terrainTiles[i].x += this.scrollDistance;\n      if (distanceX <= -this.changeDistance)\n        this.terrainTiles[i].x -= this.scrollDistance;\n      if (distanceY >= this.changeDistance)\n        this.terrainTiles[i].y += this.scrollDistance;\n      if (distanceY <= -this.changeDistance)\n        this.terrainTiles[i].y -= this.scrollDistance;\n    }\n  }\n}\n"]}