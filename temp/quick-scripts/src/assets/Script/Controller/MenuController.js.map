{"version":3,"sources":["assets\\Script\\Controller\\MenuController.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/life-cycle-callbacks.html\n\nimport Utils from \"./Utils\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class MenuController extends cc.Component {\n  static instance: MenuController;\n  @property(cc.JsonAsset)\n  dataPlayer: cc.JsonAsset = null;\n  @property(cc.Node)\n  character: cc.Node = null;\n  @property(Array(cc.Prefab))\n  characterList: Array<cc.Prefab> = Array<cc.Prefab>();\n  @property(cc.Label)\n  displayName: cc.Label = null;\n  @property(Array(cc.SpriteFrame))\n  weaponIconList: Array<cc.SpriteFrame> = Array<cc.SpriteFrame>();\n  @property(cc.Label)\n  hpAmount: cc.Label = null;\n  @property(cc.Label)\n  atkAmount: cc.Label = null;\n  @property(cc.Label)\n  spdAmount: cc.Label = null;\n  @property(cc.Label)\n  crtAmount: cc.Label = null;\n  @property(cc.Sprite)\n  weaponIcon: cc.Sprite = null;\n  @property(cc.Label)\n  weaponName: cc.Label = null;\n  @property(cc.RichText)\n  description: cc.RichText = null;\n  @property(cc.AudioClip)\n  backgroundMusic: cc.AudioClip = null;\n  @property(cc.AudioClip)\n  charSelectSound: cc.AudioClip = null;\n  @property(cc.AudioClip)\n  buttonSound: cc.AudioClip = null;\n  characters;\n  level;\n  currentIndex: number = 0;\n  onLoad() {\n    Utils.setLocal(\"Sound\", true);\n    if (Utils.getLocal(\"Sound\") == \"true\")\n      this.node.getComponent(cc.AudioSource).resume();\n    else this.node.getComponent(cc.AudioSource).pause();\n    MenuController.instance = this;\n    if (Utils.getLocal(\"Sound\") == null) Utils.setLocal(\"Sound\", true);\n    this.characters = this.dataPlayer.json.character;\n    cc.director.preloadScene(\"Gamescene\");\n    cc.director.getPhysicsManager().enabled = true;\n    cc.director.getCollisionManager().enabled = true;\n    this.loadData(this.currentIndex);\n  }\n  onPlayButtonClick() {\n    if (Utils.getLocal(\"Sound\") == \"true\")\n      cc.audioEngine.play(this.buttonSound, false, 1);\n    cc.director.loadScene(\"Gamescene\");\n  }\n  onNextCharacterClick() {\n    if (Utils.getLocal(\"Sound\") == \"true\")\n      cc.audioEngine.play(this.charSelectSound, false, 1);\n    this.currentIndex++;\n    let index = Math.abs(this.currentIndex) % this.characters.length;\n    this.loadData(Math.abs(index));\n  }\n  onPreCharacterClick() {\n    if (Utils.getLocal(\"Sound\") == \"true\")\n      cc.audioEngine.play(this.charSelectSound, false, 1);\n    this.currentIndex--;\n    let index = Math.abs(this.currentIndex) % this.characters.length;\n    this.loadData(Math.abs(index));\n  }\n  loadData(index: number) {\n    let characterData = this.characters[index];\n    Utils.setCharacter(characterData.name);\n    if (Utils.getLocal(characterData.name + \"LV\") == null) {\n      Utils.setLocal(characterData.name + \"LV\", 1);\n    }\n    this.level = Utils.getLocal(characterData.name + \"LV\");\n    Utils.setCharacterLevel(this.level);\n    this.character.removeAllChildren();\n    this.character.addChild(cc.instantiate(this.characterList[index]));\n    this.displayName.string = characterData.name;\n    this.hpAmount.string = characterData.stats[this.level - 1].health;\n    this.atkAmount.string = \"1.\" + characterData.stats[this.level - 1].atk;\n    this.spdAmount.string = characterData.stats[this.level - 1].speed;\n    this.crtAmount.string = characterData.stats[this.level - 1].crit + \"%\";\n    this.weaponIcon.spriteFrame = this.weaponIconList[index];\n    this.weaponName.string = characterData.weapon;\n    this.description.string = characterData.weaponDes;\n  }\n  start() {}\n\n  update(dt) {\n    if (Utils.getLocal(\"Sound\") == \"true\")\n      this.node.getComponent(cc.AudioSource).resume();\n    else this.node.getComponent(cc.AudioSource).pause();\n  }\n}\n"]}