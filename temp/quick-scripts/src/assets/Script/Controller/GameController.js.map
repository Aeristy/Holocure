{"version":3,"sources":["assets\\Script\\Controller\\GameController.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import BaneOfRegeneration from \"../Item/BaneOfRegeneration\";\nimport BloodyTear from \"../Item/BloodyTear\";\nimport Dumbbell from \"../Item/Dumbbell\";\nimport EyePatch from \"../Item/EyePatch\";\nimport GrowthPill from \"../Item/GrowthPill\";\nimport Item from \"../Item/Item\";\nimport AxeThrower from \"../Weapon/AxeThrower\";\nimport Bow from \"../Weapon/Bow\";\nimport MollyThrower from \"../Weapon/MollyThrower\";\nimport ShurikenThrower from \"../Weapon/ShurikenThrower\";\nimport Sword from \"../Weapon/Sword\";\nimport Weapon from \"../Weapon/Weapon\";\nimport SlotController from \"./SlotController\";\nimport UIController from \"./UIController\";\nimport Utils from \"./Utils\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class GameController extends cc.Component {\n  static instance: GameController;\n  @property(cc.AudioClip)\n  gameOverSound: cc.AudioClip = null;\n  timer: number = 0;\n  // LIFE-CYCLE CALLBACKS:\n  killAmount: number = 0;\n  coinAmount: number = 0;\n  dynamicBuff: Array<any> = new Array<any>();\n  itemList: Array<any> = new Array<any>();\n  weaponList: Array<any> = new Array<any>();\n  equipedWeapon: Array<any> = new Array<any>();\n  equipedItem: Array<any> = new Array<any>();\n  isGameOver: boolean = null;\n  onLoad() {\n    GameController.instance = this;\n    Utils.isPause = false;\n\n    cc.director.getPhysicsManager().enabled = true;\n    cc.director.getCollisionManager().enabled = true;\n  }\n  gainKill() {\n    this.killAmount++;\n    UIController.instance.updateKillLabel(this.killAmount);\n  }\n  gainCoin(amount) {\n    this.coinAmount += amount;\n    UIController.instance.updateCoinLabel(this.coinAmount);\n  }\n  takeDamage() {\n    for (let i = 0; i < this.dynamicBuff.length; i++) {\n      this.dynamicBuff[i].onTakeDamage();\n    }\n  }\n  addWeapon(weapon: Weapon) {\n    this.weaponList.push(weapon);\n  }\n  addEquipedWeapon(weapon: Weapon) {\n    this.equipedWeapon.push(weapon);\n  }\n  addItem(item: Item) {\n    this.itemList.push(item);\n  }\n  addEquipedItem(item: Item) {\n    this.equipedItem.push(item);\n  }\n  onLevelUp() {\n    UIController.instance.onLevelUp();\n  }\n\n  start() {\n    SlotController.instance.updateSlot();\n  }\n  tuyetvong() {\n    for (let i = 0; i < this.weaponList.length; i++) {\n      this.weaponList[i].onLevelUp();\n    }\n    for (let i = 0; i < this.itemList.length; i++) {\n      this.itemList[i].onLevelUp();\n    }\n  }\n  onGameOver() {\n    this.isGameOver = true;\n    this.equipedItem.forEach((element) => {\n      element.isEquiped = false;\n    });\n    this.equipedWeapon.forEach((element) => {\n      element.isEquiped = false;\n    });\n\n    this.scheduleOnce(function () {\n      this.node.getComponent(cc.AudioSource).pause();\n      UIController.instance.onGameOver();\n      if (Utils.getLocal(\"Sound\") == \"true\")\n        cc.audioEngine.play(this.gameOverSound, false, 1);\n    }, 3);\n  }\n\n  update(dt) {\n    if (Utils.getLocal(\"Sound\") == \"true\")\n      this.node.getComponent(cc.AudioSource).resume();\n    else this.node.getComponent(cc.AudioSource).pause();\n    if (Utils.isPause) {\n      return;\n    }\n    this.timer += dt;\n  }\n}\n"]}