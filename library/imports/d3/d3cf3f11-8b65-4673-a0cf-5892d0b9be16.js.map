{"version":3,"sources":["assets\\Script\\Weapon\\ThrowableProjectile.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/typescript.html\n// Learn Attribute:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - https://docs.cocos.com/creator/2.4/manual/en/scripting/life-cycle-callbacks.html\n\nimport Utils from \"../Controller/Utils\";\nimport EnemyController from \"../Enemy/EnemyController\";\nimport ProjectilePooling from \"../Manager/ProjectilePooling\";\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class ThrowableProjectile extends cc.Component {\n  velocity: cc.Vec2 = cc.Vec2.ZERO;\n  @property(cc.SpriteFrame)\n  sprite: cc.SpriteFrame = null;\n  speed = 1000;\n  @property(cc.Float)\n  damage = 20;\n  @property(cc.Float)\n  weaponScale = 1;\n  @property(cc.Float)\n  duration = 3;\n  @property(cc.AudioClip)\n  lavaLand: cc.AudioClip = null;\n  targetPos: cc.Vec3 = null;\n  dt: number = 0;\n  baseDamange: number;\n  baseScale: number;\n  baseDuration: number;\n  damagePercentage: number;\n  weaponScalePercentage: number;\n  durationPercentage: number;\n  directionVector: cc.Vec2;\n  isLanded: boolean = false;\n  timer = 100;\n  interval = 0.01;\n  time = this.interval;\n  lock: boolean = false;\n  curveY: number = 0;\n  travelTime: number = 0;\n  currentTime: number = 0;\n  previous: cc.Node = null;\n  trailList: Array<cc.Node> = new Array<cc.Node>();\n\n  onCollisionStay(other: cc.Collider, self: cc.Collider) {\n    if (other.tag == 1) {\n      other.node\n        .getComponent(EnemyController)\n        .takeDamageWithTick(this.damage, 0.5);\n    }\n  }\n  set(\n    damagePercentage: number,\n    baseDamage: number,\n    weaponScalePercentage: number,\n    durationPercentage: number,\n    target: cc.Vec3,\n    position: cc.Vec3\n  ) {\n    this.baseDamange = baseDamage;\n    this.damagePercentage = damagePercentage;\n    this.weaponScalePercentage = weaponScalePercentage;\n    this.durationPercentage = durationPercentage;\n    this.targetPos = target;\n    this.node.position = position;\n    this.node.getComponent(cc.Animation).stop();\n    this.node.getComponent(cc.Sprite).spriteFrame = this.sprite;\n    this.isLanded = false;\n    this.lock = false;\n    this.timer = 100;\n    this.currentTime = 0;\n    this.node.getComponent(cc.CircleCollider).enabled = false;\n    this.updateStats();\n  }\n  updateStats() {\n    this.damage =\n      (this.damagePercentage / 100) * this.baseDamange + this.baseDamange;\n    this.weaponScale =\n      (this.weaponScalePercentage / 100) * this.baseScale + this.baseScale;\n    this.duration =\n      -(this.durationPercentage / 100) * this.baseDuration + this.baseDuration;\n  }\n\n  onLand() {\n    if (\n      (!this.isLanded && this.distanceToTarget() < 50) ||\n      (!this.isLanded && this.currentTime > this.travelTime)\n    ) {\n      if (Utils.getLocal(\"Sound\") == \"true\")\n        cc.audioEngine.play(this.lavaLand, false, 1);\n      this.node.zIndex = 1;\n      this.trailList.forEach((element) => {\n        ProjectilePooling.instance.putBackToPool(element);\n      });\n      this.trailList.length = 0;\n      this.node.getComponent(cc.Animation).play(\"MollySpread\");\n      this.node.scale = this.weaponScale / 2;\n      cc.tween(this.node).to(0.42, { scale: this.weaponScale }).start();\n      this.node.getComponent(cc.RigidBody).linearVelocity = cc.v2(0, 0);\n      this.node.getComponent(cc.CircleCollider).enabled = true;\n      this.isLanded = true;\n    }\n    if (\n      this.isLanded &&\n      !this.node.getComponent(cc.Animation).getAnimationState(\"MollySpread\")\n        .isPlaying &&\n      !this.node.getComponent(cc.Animation).getAnimationState(\"MollyOnGround\")\n        .isPlaying\n    ) {\n      this.timer = this.duration;\n      this.node.getComponent(cc.Animation).play(\"MollyOnGround\");\n    }\n  }\n  distanceToTarget() {\n    var distanceX =\n      (this.targetPos.x - this.node.x) * (this.targetPos.x - this.node.x);\n    var distanceY =\n      (this.targetPos.y - this.node.y) * (this.targetPos.y - this.node.y);\n    var distance = Math.sqrt(distanceX + distanceY);\n    return distance;\n  }\n  onLoad() {\n    this.node.getComponent(cc.CircleCollider).enabled = false;\n    this.node.scale = 0.3;\n    this.node.zIndex = 10001;\n    this.baseDamange = this.damage;\n    this.baseDuration = this.duration;\n    this.baseScale = this.weaponScale;\n    this.damagePercentage = 0;\n    this.weaponScalePercentage = 0;\n    this.durationPercentage = 0;\n  }\n  start() {}\n  lockTarget(dt: number) {\n    if (this.isLanded) return;\n    if (this.lock) return;\n    this.lock = true;\n    var deltaX = this.targetPos.x - this.node.x;\n    var deltaY = this.targetPos.y - this.node.y;\n    this.directionVector = cc.v2(deltaX, deltaY);\n    this.travelTime = this.distanceToTarget() / this.speed;\n    if (this.travelTime > 0.5) this.travelTime = 0.5;\n    // this.node.x += this.directionVector.normalize().x * this.speed * dt;\n    // this.node.y += this.directionVector.normalize().y * this.speed * dt;\n    this.velocity = cc.v2(\n      this.directionVector.normalize().x * this.speed,\n      this.directionVector.normalize().y * this.speed + 150\n    );\n    this.node.getComponent(cc.RigidBody).linearVelocity = cc.v2(\n      this.velocity.x,\n      this.velocity.y\n    );\n  }\n  moveNode(dt) {\n    if (this.isLanded) return;\n    this.node.scale = 0.3;\n    this.addTrail(dt);\n    this.curveY = dt * 1000;\n    this.velocity.y -= this.curveY;\n    this.node.getComponent(cc.RigidBody).linearVelocity = cc.v2(\n      this.velocity.x * dt * 50,\n      this.velocity.y * dt * 50\n    );\n    this.node.angle =\n      Math.atan2(this.velocity.y, this.velocity.x) * (180 / Math.PI);\n  }\n  addTrail(dt) {\n    if (this.time > 0) this.time -= dt;\n    else {\n      this.time = this.interval;\n      let clone: cc.Node = null;\n      clone = ProjectilePooling.instance.trailPool.get();\n\n      if (clone == null) {\n        clone = new cc.Node(\"Trail\");\n      }\n\n      this.trailList.push(clone);\n      clone.parent = this.node.parent;\n      clone.scale = this.node.scale;\n      clone.opacity = 200;\n      clone.angle = this.node.angle;\n      clone.zIndex = 9999;\n\n      clone.position = cc.v3(this.node.x, this.node.y);\n      if (clone.getComponent(cc.Sprite) != null)\n        clone.getComponent(cc.Sprite).spriteFrame = this.node.getComponent(\n          cc.Sprite\n        ).spriteFrame;\n      else\n        clone.addComponent(cc.Sprite).spriteFrame = this.node.getComponent(\n          cc.Sprite\n        ).spriteFrame;\n      clone.setContentSize(this.node.getContentSize());\n      cc.tween(clone).to(0.08, { opacity: 0 }).start();\n    }\n  }\n\n  update(dt) {\n    if (Utils.isPause) {\n      this.node.getComponent(cc.Animation).pause();\n      this.node.getComponent(cc.RigidBody).linearVelocity = cc.v2(0, 0);\n      return;\n    }\n    this.node.getComponent(cc.Animation).resume();\n    if (this.targetPos == null) return;\n    this.timer -= dt;\n    this.currentTime += dt;\n    if (this.timer < 0) {\n      ProjectilePooling.instance.putBackToPool(this.node);\n    }\n\n    this.moveNode(dt);\n    this.lockTarget(dt);\n\n    this.onLand();\n  }\n}\n"]}